{% extends 'base.html.twig' %}


{% block title %}Commande{% endblock %}
{% block stylesheets %}
    {{ parent() }}
  
    <style>
        body {
        padding: 0px;
        margin: 0;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        }
    
        table {
            border-collapse: collapse;
            width: 800px;
            height: 200px;
            border: 1px solid #bdc3c7;
            box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.2), -1px -1px 8px rgba(0, 0, 0, 0.2);
            margin: 0 auto; 
            margin-bottom: 60px;
           
        }
    tr {
        transition: all .2s ease-in;
        cursor: pointer;
    }
    
    th,
    td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    
   
    h1 {
        text-align: center;
        margin-bottom: 30px;
        color: #007bff;
    }
   
    .custom-button {
        background-color: #FF4500;
        transition: background-color 0.3s ease;
        
    }
    
    .custom-button:hover {
        background-color: #ffb74D; /* Button color on hover */
    }

    tr:hover {
        background-color: #f5f5f5;
        transform: scale(1.02);
        box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.2), -1px -1px 8px rgba(0, 0, 0, 0.2);
    }
    
    @media only screen and (max-width: 768px) {
        table {
            width: 90%;
        }
        

    }
</style>{%endblock%}
{% block AabiElWest1 %}
    <h1>Liste des commandes</h1>

    <table>
        <tr id="header">
            <th>Référence</th>
            <th>Date</th>
            <th>Status</th>
            <th>Mode de livraison</th>
            <th>Actions</th>
        </tr>
        {% for commande in com %}
            <tr data-commande-id="{{ commande.idCommande }}">
                <td>{{ commande.reference }}</td>
                <td>{{ commande.dateCom|date('Y-m-d') }}</td>
                <td>{{ commande.status }}</td>
                <td>{{ commande.livrable ? 'A domicile' : 'Retrait en magasin' }}</td>
                <td>
                    <a href="#" class="btn btn-danger custom-button" onclick="return deleteCommande(event, {{ commande.idCommande }})">Supprimer</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">Aucune commande trouvée</td>
            </tr>
        {% endfor %}
    </table>

    <script>
        function deleteCommande(event, commandeId) {
            event.preventDefault();
            if (confirm('Êtes-vous sûr de vouloir supprimer cette commande ?')) {
                // Send AJAX request to delete the command
                fetch('{{ path('commande_deletefront', {'id': '__id__'}) }}'.replace('__id__', commandeId), {
                    method: 'DELETE',
                })
                .then(response => {
                    if (response.ok) {
                        // Remove the corresponding row from the table
                        const row = document.querySelector(`tr[data-commande-id="${commandeId}"]`);
                        if (row) {
                            row.remove();
                        }
                    } else {
                        console.error('Error deleting command:', response.statusText);
                    }
                })
                .catch(error => {
                    console.error('Error deleting command:', error);
                });
            }
        }
    </script>
{% endblock %}
